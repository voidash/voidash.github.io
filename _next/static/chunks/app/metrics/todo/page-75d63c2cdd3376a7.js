(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{46:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var o=r(5155),n=r(2115),a=r(550),i=r(9708),l=r(2619),s=r.n(l);function d(){let[e,t]=(0,n.useState)([]),[r,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)("all"),[p,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(""),[m,g]=(0,n.useState)("learning"),[y,b]=(0,n.useState)("");async function f(){try{let e=(0,i.P)((0,i.rJ)(a.db,"todos"),(0,i.My)("createdAt","desc")),r=(await (0,i.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));t(r),l(!1)}catch(e){console.error("Error fetching todos:",e),l(!1)}}async function v(){if(!h.trim())return void b("Error: Todo text required");try{let e={text:h.trim(),label:m,sourceDate:new Date().toISOString().split("T")[0],completed:!1,createdAt:new Date().toISOString()};await (0,i.gS)((0,i.rJ)(a.db,"todos"),e),x(""),u(!1),f(),b("✓ Todo added"),setTimeout(()=>b(""),2e3)}catch(e){console.error("Error adding todo:",e),b("Error adding todo")}}async function k(e){if(e.id)try{let t=!e.completed,r={completed:t};t?r.completedDate=new Date().toISOString().split("T")[0]:r.completedDate=null,await (0,i.mZ)((0,i.H9)(a.db,"todos",e.id),r),await j(e,t),f()}catch(e){console.error("Error updating todo:",e),b("Error updating todo")}}async function j(e,t){try{let r=(0,i.P)((0,i.rJ)(a.db,"daily_logs"),(0,i._M)("date","==",e.sourceDate)),o=await (0,i.GG)(r);if(!o.empty){let r=o.docs[0],n=r.data().tasksMarkdown,l="#".concat(e.label,"-todo"),s=n.split("\n").map(r=>{if(r.includes(e.text)&&r.includes(l))if(t)return r.replace(/^(\s*-\s*)\[\s*\]/,"$1[x]");else return r.replace(/^(\s*-\s*)\[x\]/i,"$1[ ]");return r}).join("\n");await (0,i.mZ)((0,i.H9)(a.db,"daily_logs",r.id),{tasksMarkdown:s})}}catch(e){console.error("Error syncing todo to daily log:",e)}}async function w(e){if(e.id)try{await (0,i.kd)((0,i.H9)(a.db,"todos",e.id)),f(),b("✓ Todo deleted"),setTimeout(()=>b(""),2e3)}catch(e){console.error("Error deleting todo:",e),b("Error deleting todo")}}(0,n.useEffect)(()=>{f()},[]);let S="all"===d?e:e.filter(e=>e.label===d),T={learning:S.filter(e=>"learning"===e.label),producer:S.filter(e=>"producer"===e.label),finance:S.filter(e=>"finance"===e.label),fitness:S.filter(e=>"fitness"===e.label),relationship:S.filter(e=>"relationship"===e.label)};return r?(0,o.jsx)("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"40px 20px"},children:(0,o.jsx)("p",{style:{textAlign:"center",color:"var(--text-secondary)"},children:"Loading todos..."})}):(0,o.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"40px 20px"},children:[(0,o.jsxs)("nav",{style:{marginBottom:"20px",display:"flex",gap:"15px",alignItems:"center"},children:[(0,o.jsx)(s(),{href:"/metrics",style:{color:"#0066cc"},children:"← Back to Metrics"}),(0,o.jsx)("button",{onClick:()=>u(!p),style:{padding:"6px 12px",background:"#0066cc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:p?"Cancel":"+ Add Todo"})]}),(0,o.jsx)("h1",{style:{marginBottom:"10px"},children:"Todo Backlog"}),(0,o.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"30px"},children:"Todos from daily logs and manually added"}),p&&(0,o.jsxs)("div",{style:{background:"var(--bg-secondary)",padding:"20px",borderRadius:"8px",marginBottom:"30px",border:"1px solid var(--border-color)"},children:[(0,o.jsx)("h3",{style:{marginBottom:"15px"},children:"Add New Todo"}),(0,o.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Todo Text"}),(0,o.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"What needs to be done?",style:{width:"100%",padding:"8px",border:"1px solid var(--border-color)",borderRadius:"4px",background:"var(--bg-secondary)",color:"var(--text-primary)"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Category"}),(0,o.jsxs)("select",{value:m,onChange:e=>g(e.target.value),style:{width:"100%",padding:"8px",border:"1px solid var(--border-color)",borderRadius:"4px",background:"var(--bg-secondary)",color:"var(--text-primary)"},children:[(0,o.jsx)("option",{value:"learning",children:"Learning"}),(0,o.jsx)("option",{value:"producer",children:"Producer"}),(0,o.jsx)("option",{value:"finance",children:"Finance"}),(0,o.jsx)("option",{value:"fitness",children:"Fitness"}),(0,o.jsx)("option",{value:"relationship",children:"Relationship"})]})]}),(0,o.jsx)("button",{onClick:v,style:{width:"100%",padding:"10px",background:"#0066cc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"Add Todo"})]}),(0,o.jsxs)("div",{style:{marginBottom:"30px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,o.jsxs)("button",{onClick:()=>c("all"),style:{padding:"8px 16px",background:"all"===d?"#0066cc":"transparent",color:"all"===d?"white":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:["All (",e.length,")"]}),(0,o.jsxs)("button",{onClick:()=>c("learning"),style:{padding:"8px 16px",background:"learning"===d?"#0066cc":"transparent",color:"learning"===d?"white":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:["Learning (",T.learning.length,")"]}),(0,o.jsxs)("button",{onClick:()=>c("producer"),style:{padding:"8px 16px",background:"producer"===d?"#0066cc":"transparent",color:"producer"===d?"white":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:["Producer (",T.producer.length,")"]}),(0,o.jsxs)("button",{onClick:()=>c("finance"),style:{padding:"8px 16px",background:"finance"===d?"#0066cc":"transparent",color:"finance"===d?"white":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:["Finance (",T.finance.length,")"]}),(0,o.jsxs)("button",{onClick:()=>c("fitness"),style:{padding:"8px 16px",background:"fitness"===d?"#0066cc":"transparent",color:"fitness"===d?"white":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:["Fitness (",T.fitness.length,")"]}),(0,o.jsxs)("button",{onClick:()=>c("relationship"),style:{padding:"8px 16px",background:"relationship"===d?"#0066cc":"transparent",color:"relationship"===d?"white":"var(--text-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:["Relationship (",T.relationship.length,")"]})]}),0===S.length?(0,o.jsx)("div",{style:{background:"var(--bg-secondary)",padding:"40px",borderRadius:"8px",textAlign:"center",color:"var(--text-secondary)"},children:(0,o.jsx)("p",{children:"No todos found. Add todos manually or use tags like #learning-todo in daily logs."})}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:S.map((e,t)=>(0,o.jsx)("div",{style:{background:"var(--bg-secondary)",padding:"15px",borderRadius:"4px",border:"1px solid var(--border-color)",opacity:e.completed?.6:1},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[e.id&&(0,o.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>k(e),style:{marginTop:"3px",cursor:"pointer",width:"18px",height:"18px"}}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("p",{style:{margin:0,marginBottom:"8px",textDecoration:e.completed?"line-through":"none"},children:e.text}),(0,o.jsxs)("div",{style:{fontSize:"12px",color:"var(--text-secondary)",display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,o.jsx)("span",{children:e.label}),(0,o.jsx)("span",{children:"•"}),(0,o.jsxs)("span",{children:["Added ",e.sourceDate]}),e.completedDate&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:"•"}),(0,o.jsxs)("span",{style:{color:"#22c55e"},children:["Completed ",e.completedDate]})]}),!e.id&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:"•"}),(0,o.jsx)("span",{style:{fontStyle:"italic"},children:"From daily log"})]})]})]}),e.id&&(0,o.jsx)("button",{onClick:()=>w(e),style:{padding:"4px 8px",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})},e.id||t))}),y&&(0,o.jsx)("p",{style:{marginTop:"20px",textAlign:"center",color:y.includes("Error")?"#ef4444":"#22c55e"},children:y})]})}},550:(e,t,r)=>{"use strict";r.d(t,{db:()=>l,j:()=>s,y:()=>i});var o=r(2078),n=r(9708),a=r(9253);let i=(0,o.Dk)().length?(0,o.Dk)()[0]:(0,o.Wp)({apiKey:"AIzaSyCwVnyj4j9vVEu88BXKxd6-4sNa-mkduVI",authDomain:"ask-me-anything-voidash.firebaseapp.com",projectId:"ask-me-anything-voidash",storageBucket:"ask-me-anything-voidash.firebasestorage.app",messagingSenderId:"695897255699",appId:"1:695897255699:web:fef029a271b72ee38f74e6",measurementId:"G-43LRB0V3BW"}),l=(0,n.aU)(i),s=(0,a.xI)(i)},4162:(e,t,r)=>{Promise.resolve().then(r.bind(r,46)),Promise.resolve().then(r.bind(r,6621))},5379:(e,t,r)=>{"use strict";r.d(t,{D:()=>d,N:()=>c});var o=r(2115),n=(e,t,r,o,n,a,i,l)=>{let s=document.documentElement,d=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&a?n.map(e=>a[e]||e):n;r?(s.classList.remove(...o),s.classList.add(a&&a[t]?a[t]:t)):s.setAttribute(e,t)}),r=t,l&&d.includes(r)&&(s.style.colorScheme=r)}if(o)c(o);else try{let e=localStorage.getItem(t)||r,o=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(o)}catch(e){}},a=["light","dark"],i="(prefers-color-scheme: dark)",l=o.createContext(void 0),s={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=o.useContext(l))?e:s},c=e=>o.useContext(l)?o.createElement(o.Fragment,null,e.children):o.createElement(u,{...e}),p=["light","dark"],u=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:n=!0,enableColorScheme:s=!0,storageKey:d="theme",themes:c=p,defaultTheme:u=n?"system":"light",attribute:y="data-theme",value:b,children:f,nonce:v,scriptProps:k}=e,[j,w]=o.useState(()=>x(d,u)),[S,T]=o.useState(()=>"system"===j?g():j),C=b?Object.values(b):c,E=o.useCallback(e=>{let t=e;if(!t)return;"system"===e&&n&&(t=g());let o=b?b[t]:t,i=r?m(v):null,l=document.documentElement,d=e=>{"class"===e?(l.classList.remove(...C),o&&l.classList.add(o)):e.startsWith("data-")&&(o?l.setAttribute(e,o):l.removeAttribute(e))};if(Array.isArray(y)?y.forEach(d):d(y),s){let e=a.includes(u)?u:null,r=a.includes(t)?t:e;l.style.colorScheme=r}null==i||i()},[v]),A=o.useCallback(e=>{let t="function"==typeof e?e(j):e;w(t);try{localStorage.setItem(d,t)}catch(e){}},[j]),D=o.useCallback(e=>{T(g(e)),"system"===j&&n&&!t&&E("system")},[j,t]);o.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(D),D(e),()=>e.removeListener(D)},[D]),o.useEffect(()=>{let e=e=>{e.key===d&&(e.newValue?w(e.newValue):A(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[A]),o.useEffect(()=>{E(null!=t?t:j)},[t,j]);let B=o.useMemo(()=>({theme:j,setTheme:A,forcedTheme:t,resolvedTheme:"system"===j?S:j,themes:n?[...c,"system"]:c,systemTheme:n?S:void 0}),[j,A,t,S,n,c]);return o.createElement(l.Provider,{value:B},o.createElement(h,{forcedTheme:t,storageKey:d,attribute:y,enableSystem:n,enableColorScheme:s,defaultTheme:u,value:b,themes:c,nonce:v,scriptProps:k}),f)},h=o.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:a,enableSystem:i,enableColorScheme:l,defaultTheme:s,value:d,themes:c,nonce:p,scriptProps:u}=e,h=JSON.stringify([a,r,s,t,c,d,i,l]).slice(1,-1);return o.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(n.toString(),")(").concat(h,")")}})}),x=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},m=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")},6621:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>i});var o=r(5155),n=r(5379),a=r(2115);function i(){let[e,t]=(0,a.useState)(!1),{theme:r,setTheme:i}=(0,n.D)();return((0,a.useEffect)(()=>{t(!0)},[]),e)?(0,o.jsx)("button",{onClick:()=>i("dark"===r?"light":"dark"),className:"theme-toggle","aria-label":"Toggle theme",children:"dark"===r?"Light":"Dark"}):null}}},e=>{e.O(0,[992,138,619,477,441,255,358],()=>e(e.s=4162)),_N_E=e.O()}]);