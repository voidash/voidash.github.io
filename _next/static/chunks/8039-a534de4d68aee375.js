"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8039],{63:(e,t,r)=>{var n=r(7260);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},216:(e,t,r)=>{r.d(t,{S:()=>u,b:()=>c});var n=r(2115),a=r(550),o=r(9708),s=r(3510);function l(e){let t=new Date(e),r=t.getDay(),n=t.getDate()-r+(0===r?-6:1);return t.setDate(n),t.toISOString().split("T")[0]}function i(e){if(!e)return"";let t=new Date(e);return isNaN(t.getTime())?"":(t.setDate(t.getDate()+6),t.toISOString().split("T")[0])}function c(e,t){let r=new Date,[c,u]=(0,n.useState)(t||l(r)),[d,m]=(0,n.useState)(i(t||l(r))),[f,g]=(0,n.useState)(!1),[h,p]=(0,n.useState)(""),[w,y]=(0,n.useState)(0),[k,v]=(0,n.useState)(!1),[S,b]=(0,n.useState)("none"),[E,C]=(0,n.useState)("none"),[T,A]=(0,n.useState)(""),[D,x]=(0,n.useState)(null),[I,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{f||m(i(c))},[c,f]),(0,n.useEffect)(()=>{e&&t();async function t(){try{let e=new Date(c),t=new Date(d),r=(0,o.P)((0,o.rJ)(a.db,"weekly_logs"),(0,o.My)("weekStart","asc"));for(let n of(await (0,o.GG)(r)).docs){let r=n.data(),a=new Date(r.weekStart),o=new Date(r.weekEnd);if(r.weekStart!==c&&e<=o&&t>=a)return void A("⚠️ Overlaps with week ".concat(r.weekStart," to ").concat(r.weekEnd))}let n=(0,o.P)((0,o.rJ)(a.db,"weekly_logs"),(0,o._M)("weekStart","==",c)),s=await (0,o.GG)(n);if(s.empty)x(null),A("");else{let e=s.docs[0],t=e.data();x(e.id),p(t.tasksMarkdown),y(t.targetWeight||0),v(t.primaryRelationshipActive),b(t.financeConceptApplied||"none"),C(t.portfolioReview||"none"),t.weekEnd&&(g(!0),m(t.weekEnd)),A("")}}catch(e){console.error("Error checking overlap:",e)}}},[c,e]);let _=(0,n.useMemo)(()=>{if(!h.trim())return null;let e=(0,s.Zg)(h);(0,s.zP)(e);let t=(0,s.Kk)(h);return{totalTasks:e.length,completedTasks:e.filter(e=>e.completed).length,financeConceptApplied:t.financeConceptApplied,portfolioReview:t.portfolioReview}},[h]);async function L(){if(!e)return A("Error: You must be logged in"),!1;if(T.includes("Overlaps"))return A("Error: Cannot save overlapping week"),!1;if(I)return!1;P(!0),A("Saving...");try{let e=(0,o.P)((0,o.rJ)(a.db,"weekly_logs"),(0,o._M)("weekStart","==",c)),t=await (0,o.GG)(e),r={weekStart:c,weekEnd:d,tasksMarkdown:h,targetWeight:w,primaryRelationshipActive:k,financeConceptApplied:S,portfolioReview:E,createdAt:new Date().toISOString()},n=D;if(n||t.empty||(n=t.docs[0].id),n){let e=(0,o.H9)(a.db,"weekly_logs",n);await (0,o.mZ)(e,r),x(n),A("✓ Updated")}else{let e=await (0,o.gS)((0,o.rJ)(a.db,"weekly_logs"),r);x(e.id),A("✓ Saved")}return setTimeout(()=>A(""),2e3),!0}catch(e){return console.error("Error saving log:",e),A("Error saving log"),!1}finally{P(!1)}}return{weekStart:c,weekEnd:d,tasksMarkdown:h,targetWeight:w,primaryRelationshipActive:k,financeConceptApplied:S,portfolioReview:E,status:T,existingLogId:D,isSaving:I,taskStats:_,manualWeekEnd:f,setWeekStart:u,setWeekEnd:m,setTasksMarkdown:p,setTargetWeight:y,setPrimaryRelationshipActive:v,setFinanceConceptApplied:b,setPortfolioReview:C,setManualWeekEnd:g,saveLog:L,loadLog:function(e){u(e.weekStart),e.weekEnd?(g(!0),m(e.weekEnd)):g(!1),p(e.tasksMarkdown),y(e.targetWeight||0),v(e.primaryRelationshipActive),b(e.financeConceptApplied||"none"),C(e.portfolioReview||"none"),x(e.id)}}}function u(e){let[t,r]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0);async function i(e){if(!window.confirm("Are you sure you want to delete this weekly log? This action cannot be undone."))return!1;try{let n=(0,o.H9)(a.db,"weekly_logs",e);return await (0,o.kd)(n),r(t.filter(t=>t.id!==e)),!0}catch(e){return console.error("Error deleting log:",e),!1}}return(0,n.useEffect)(()=>{if(!e){r([]),l(!1);return}!async function(){try{l(!0);let e=(0,o.P)((0,o.rJ)(a.db,"weekly_logs"),(0,o.My)("weekStart","desc")),t=(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));r(t)}catch(e){console.error("Error fetching logs:",e)}finally{l(!1)}}()},[e]),{allLogs:t,loading:s,deleteLog:i,refreshLogs:async function(){if(e)try{let e=(0,o.P)((0,o.rJ)(a.db,"weekly_logs"),(0,o.My)("weekStart","desc")),t=(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));r(t)}catch(e){console.error("Error refreshing logs:",e)}}}}},550:(e,t,r)=>{r.d(t,{db:()=>l,j:()=>i,y:()=>s});var n=r(2078),a=r(9708),o=r(9253);let s=(0,n.Dk)().length?(0,n.Dk)()[0]:(0,n.Wp)({apiKey:"AIzaSyCwVnyj4j9vVEu88BXKxd6-4sNa-mkduVI",authDomain:"ask-me-anything-voidash.firebaseapp.com",projectId:"ask-me-anything-voidash",storageBucket:"ask-me-anything-voidash.firebasestorage.app",messagingSenderId:"695897255699",appId:"1:695897255699:web:fef029a271b72ee38f74e6",measurementId:"G-43LRB0V3BW"}),l=(0,a.aU)(s),i=(0,o.xI)(s)},3510:(e,t,r)=>{function n(e){let t=e.split("\n"),r=[];for(let e of t){let t=e.match(/^[\s-]*\[([x X ])\]\s*(.*)$/i);if(t){let e="x"===t[1].toLowerCase(),n=t[2].trim(),a=(n.match(/#[\w-]+/g)||[]).map(e=>e.toLowerCase());r.push({completed:e,text:n,tags:a})}}return r}function a(e){let t=e.filter(e=>e.completed);return{learningArtifacts:t.filter(e=>e.tags.includes("#learn")).length,revisionPointsReviewed:t.filter(e=>e.tags.includes("#review")).length,revisionNotesCreated:t.filter(e=>e.tags.includes("#new-review")).length,publicOutputs:t.filter(e=>e.tags.includes("#produce")).length,newInteractions:t.filter(e=>e.tags.includes("#relationship")).length,gymSessions:t.filter(e=>e.tags.includes("#gym")).length,familyCalls:t.filter(e=>e.tags.includes("#family")).length,conflictsResolved:t.filter(e=>e.tags.includes("#conflict-resolved")).length,unresolvedConflicts:t.filter(e=>e.tags.includes("#conflict-unresolved")).length}}function o(e,t){let r=n(e),a=[],o={"#learning-todo":"learning","#producer-todo":"producer","#finance-todo":"finance","#fitness-todo":"fitness","#relationship-todo":"relationship"};for(let e of r)for(let[r,n]of Object.entries(o))if(e.tags.includes(r)){let o=e.text.replace(r,"").trim();a.push({text:o,label:n,sourceDate:t,completed:e.completed,createdAt:new Date().toISOString()});break}return a}function s(e){let t=n(e).filter(e=>e.completed),r="none";t.some(e=>e.tags.includes("#finance-concept"))&&(r="implemented");let a="none",o=t.some(e=>e.tags.includes("#ips-check")),s=t.some(e=>e.tags.includes("#portfolio-review"));return o?a="ips_checked":s&&(a="reviewed"),{financeConceptApplied:r,portfolioReview:a}}function l(e,t){let r=n(e).filter(e=>e.completed),a=[];for(let e of r)if(e.tags.includes("#learn")){let t=e.text.replace(/#learn/g,"").trim();a.push({text:t,sourceType:"learn"})}else if(e.tags.includes("#review")&&!e.tags.includes("#new-review")){let t=e.text.replace(/#review/g,"").trim();a.push({text:t,sourceType:"review"})}return a}r.d(t,{Kk:()=>s,OA:()=>l,Z7:()=>o,Zg:()=>n,zP:()=>a})},5379:(e,t,r)=>{r.d(t,{D:()=>c,N:()=>u});var n=r(2115),a=(e,t,r,n,a,o,s,l)=>{let i=document.documentElement,c=["light","dark"];function u(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?a.map(e=>o[e]||e):a;r?(i.classList.remove(...n),i.classList.add(o&&o[t]?o[t]:t)):i.setAttribute(e,t)}),r=t,l&&c.includes(r)&&(i.style.colorScheme=r)}if(n)u(n);else try{let e=localStorage.getItem(t)||r,n=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(n)}catch(e){}},o=["light","dark"],s="(prefers-color-scheme: dark)",l=n.createContext(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=n.useContext(l))?e:i},u=e=>n.useContext(l)?n.createElement(n.Fragment,null,e.children):n.createElement(m,{...e}),d=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:a=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:u=d,defaultTheme:m=a?"system":"light",attribute:w="data-theme",value:y,children:k,nonce:v,scriptProps:S}=e,[b,E]=n.useState(()=>g(c,m)),[C,T]=n.useState(()=>"system"===b?p():b),A=y?Object.values(y):u,D=n.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=p());let n=y?y[t]:t,s=r?h(v):null,l=document.documentElement,c=e=>{"class"===e?(l.classList.remove(...A),n&&l.classList.add(n)):e.startsWith("data-")&&(n?l.setAttribute(e,n):l.removeAttribute(e))};if(Array.isArray(w)?w.forEach(c):c(w),i){let e=o.includes(m)?m:null,r=o.includes(t)?t:e;l.style.colorScheme=r}null==s||s()},[v]),x=n.useCallback(e=>{let t="function"==typeof e?e(b):e;E(t);try{localStorage.setItem(c,t)}catch(e){}},[b]),I=n.useCallback(e=>{T(p(e)),"system"===b&&a&&!t&&D("system")},[b,t]);n.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),n.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?E(e.newValue):x(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[x]),n.useEffect(()=>{D(null!=t?t:b)},[t,b]);let P=n.useMemo(()=>({theme:b,setTheme:x,forcedTheme:t,resolvedTheme:"system"===b?C:b,themes:a?[...u,"system"]:u,systemTheme:a?C:void 0}),[b,x,t,C,a,u]);return n.createElement(l.Provider,{value:P},n.createElement(f,{forcedTheme:t,storageKey:c,attribute:w,enableSystem:a,enableColorScheme:i,defaultTheme:m,value:y,themes:u,nonce:v,scriptProps:S}),k)},f=n.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:o,enableSystem:s,enableColorScheme:l,defaultTheme:i,value:c,themes:u,nonce:d,scriptProps:m}=e,f=JSON.stringify([o,r,i,t,u,c,s,l]).slice(1,-1);return n.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(f,")")}})}),g=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},h=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},p=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},6621:(e,t,r)=>{r.d(t,{ThemeToggle:()=>s});var n=r(5155),a=r(5379),o=r(2115);function s(){let[e,t]=(0,o.useState)(!1),{theme:r,setTheme:s}=(0,a.D)();return((0,o.useEffect)(()=>{t(!0)},[]),e)?(0,n.jsx)("button",{onClick:()=>s("dark"===r?"light":"dark"),className:"theme-toggle","aria-label":"Toggle theme",children:"dark"===r?"Light":"Dark"}):null}},6707:(e,t,r)=>{r.d(t,{A:()=>c,AuthProvider:()=>i});var n=r(5155),a=r(2115),o=r(9253),s=r(550);let l=(0,a.createContext)({user:null,loading:!0,signInWithGoogle:async()=>{},logOut:async()=>{}});function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,o.hg)(s.j,e=>{i(e),u(!1)});return()=>e()},[]);let d=async()=>{let e=new o.HF;await (0,o.df)(s.j,e)},m=async()=>{await (0,o.CI)(s.j)};return(0,n.jsx)(l.Provider,{value:{user:r,loading:c,signInWithGoogle:d,logOut:m},children:t})}function c(){return(0,a.useContext)(l)}}}]);