"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7332],{63:(e,t,r)=>{var n=r(7260);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},550:(e,t,r)=>{r.d(t,{db:()=>o,j:()=>l,y:()=>s});var n=r(2078),a=r(9708),i=r(9253);let s=(0,n.Dk)().length?(0,n.Dk)()[0]:(0,n.Wp)({apiKey:"AIzaSyCwVnyj4j9vVEu88BXKxd6-4sNa-mkduVI",authDomain:"ask-me-anything-voidash.firebaseapp.com",projectId:"ask-me-anything-voidash",storageBucket:"ask-me-anything-voidash.firebasestorage.app",messagingSenderId:"695897255699",appId:"1:695897255699:web:fef029a271b72ee38f74e6",measurementId:"G-43LRB0V3BW"}),o=(0,a.aU)(s),l=(0,i.xI)(s)},1419:(e,t,r)=>{function n(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date().toISOString().split("T")[0],n=new Date(r),a=e.easeFactor,i=e.interval,s=e.repetitions,o=e.status;switch(t){case"again":a=Math.max(1.3,a-.2),i=1,s=0,o="learning";break;case"hard":a=Math.max(1.3,a-.15),0===s?(i=1,o="learning"):(i=1===s?6:Math.ceil(1.2*i),o="review"),s+=1;break;case"good":0===s?(i=1,o="learning"):(i=1===s?6:Math.ceil(i*a),o="review"),s+=1;break;case"easy":a=Math.min(3,a+.15),i=0===s?9:1===s?9:Math.ceil(i*a*1.3),o="review",s+=1}let l=new Date(n);return l.setDate(l.getDate()+i),{nextReviewDate:l.toISOString().split("T")[0],interval:i,easeFactor:Math.round(100*a)/100,repetitions:s,status:o}}function a(e,t,r,n){let a=new Date(r);a.setDate(a.getDate()+1);let i=a.toISOString().split("T")[0];return{userId:e,text:t,sourceDate:r,sourceType:n,createdAt:new Date().toISOString(),lastReviewDate:null,nextReviewDate:i,easeFactor:2.5,interval:1,repetitions:0,status:"new"}}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().toISOString().split("T")[0];return e.filter(e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().toISOString().split("T")[0];return e.nextReviewDate<=t})(e,t)&&"suspended"!==e.status)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().toISOString().split("T")[0],r=new Date(t);r.setDate(r.getDate()+7);let n=r.toISOString().split("T")[0],a=e.filter(e=>"new"===e.status).length,s=e.filter(e=>"learning"===e.status).length,o=e.filter(e=>"review"===e.status).length,l=i(e,t).length,c=e.filter(e=>e.nextReviewDate<=n&&"suspended"!==e.status).length,u=e.filter(e=>"suspended"!==e.status),d=u.length>0?u.reduce((e,t)=>e+t.easeFactor,0)/u.length:2.5;return{totalItems:e.length,newItems:a,learningItems:s,reviewItems:o,dueToday:l,dueThisWeek:c,averageEaseFactor:Math.round(100*d)/100}}function o(e){return{again:1,hard:0===e.repetitions?1:1===e.repetitions?6:Math.ceil(1.2*e.interval),good:0===e.repetitions?1:1===e.repetitions?6:Math.ceil(e.interval*e.easeFactor),easy:0===e.repetitions||1===e.repetitions?Math.ceil(9):Math.ceil(e.interval*e.easeFactor*1.3)}}function l(e){if(e<1)return"today";if(1===e)return"1 day";if(e<30)return"".concat(e," days");if(e<365){let t=Math.floor(e/30);return 1===t?"1 month":"".concat(t," months")}let t=Math.floor(e/365);return 1===t?"1 year":"".concat(t," years")}r.d(t,{Cz:()=>n,IA:()=>o,LN:()=>i,qy:()=>a,s2:()=>s,vy:()=>l})},5379:(e,t,r)=>{r.d(t,{D:()=>c,N:()=>u});var n=r(2115),a=(e,t,r,n,a,i,s,o)=>{let l=document.documentElement,c=["light","dark"];function u(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&i?a.map(e=>i[e]||e):a;r?(l.classList.remove(...n),l.classList.add(i&&i[t]?i[t]:t)):l.setAttribute(e,t)}),r=t,o&&c.includes(r)&&(l.style.colorScheme=r)}if(n)u(n);else try{let e=localStorage.getItem(t)||r,n=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(n)}catch(e){}},i=["light","dark"],s="(prefers-color-scheme: dark)",o=n.createContext(void 0),l={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=n.useContext(o))?e:l},u=e=>n.useContext(o)?n.createElement(n.Fragment,null,e.children):n.createElement(m,{...e}),d=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:a=!0,enableColorScheme:l=!0,storageKey:c="theme",themes:u=d,defaultTheme:m=a?"system":"light",attribute:p="data-theme",value:w,children:v,nonce:S,scriptProps:b}=e,[D,E]=n.useState(()=>g(c,m)),[I,k]=n.useState(()=>"system"===D?y():D),T=w?Object.values(w):u,M=n.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=y());let n=w?w[t]:t,s=r?f(S):null,o=document.documentElement,c=e=>{"class"===e?(o.classList.remove(...T),n&&o.classList.add(n)):e.startsWith("data-")&&(n?o.setAttribute(e,n):o.removeAttribute(e))};if(Array.isArray(p)?p.forEach(c):c(p),l){let e=i.includes(m)?m:null,r=i.includes(t)?t:e;o.style.colorScheme=r}null==s||s()},[S]),C=n.useCallback(e=>{let t="function"==typeof e?e(D):e;E(t);try{localStorage.setItem(c,t)}catch(e){}},[D]),x=n.useCallback(e=>{k(y(e)),"system"===D&&a&&!t&&M("system")},[D,t]);n.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(x),x(e),()=>e.removeListener(x)},[x]),n.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?E(e.newValue):C(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[C]),n.useEffect(()=>{M(null!=t?t:D)},[t,D]);let _=n.useMemo(()=>({theme:D,setTheme:C,forcedTheme:t,resolvedTheme:"system"===D?I:D,themes:a?[...u,"system"]:u,systemTheme:a?I:void 0}),[D,C,t,I,a,u]);return n.createElement(o.Provider,{value:_},n.createElement(h,{forcedTheme:t,storageKey:c,attribute:p,enableSystem:a,enableColorScheme:l,defaultTheme:m,value:w,themes:u,nonce:S,scriptProps:b}),v)},h=n.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:i,enableSystem:s,enableColorScheme:o,defaultTheme:l,value:c,themes:u,nonce:d,scriptProps:m}=e,h=JSON.stringify([i,r,l,t,u,c,s,o]).slice(1,-1);return n.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(h,")")}})}),g=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},6621:(e,t,r)=>{r.d(t,{ThemeToggle:()=>s});var n=r(5155),a=r(5379),i=r(2115);function s(){let[e,t]=(0,i.useState)(!1),{theme:r,setTheme:s}=(0,a.D)();return((0,i.useEffect)(()=>{t(!0)},[]),e)?(0,n.jsx)("button",{onClick:()=>s("dark"===r?"light":"dark"),className:"theme-toggle","aria-label":"Toggle theme",children:"dark"===r?"Light":"Dark"}):null}},6707:(e,t,r)=>{r.d(t,{A:()=>c,AuthProvider:()=>l});var n=r(5155),a=r(2115),i=r(9253),s=r(550);let o=(0,a.createContext)({user:null,loading:!0,signInWithGoogle:async()=>{},logOut:async()=>{}});function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,i.hg)(s.j,e=>{l(e),u(!1)});return()=>e()},[]);let d=async()=>{let e=new i.HF;await (0,i.df)(s.j,e)},m=async()=>{await (0,i.CI)(s.j)};return(0,n.jsx)(o.Provider,{value:{user:r,loading:c,signInWithGoogle:d,logOut:m},children:t})}function c(){return(0,a.useContext)(o)}},8063:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(2115),a=r(550),i=r(9708),s=r(1419);function o(e){let[t,r]=(0,n.useState)([]),[o,l]=(0,n.useState)(!0),[c,u]=(0,n.useState)([]);async function d(t,r,n){if(!e)return!1;try{let o=(0,i.P)((0,i.rJ)(a.db,"learning_items"),(0,i._M)("userId","==",e),(0,i._M)("text","==",t)),l=await (0,i.GG)(o);if(!l.empty){let e=l.docs[0],t=e.data().relatedDates||[];return t.includes(r)||await (0,i.mZ)((0,i.H9)(a.db,"learning_items",e.id),{relatedDates:[...t,r]}),!0}let c=(0,s.qy)(e,t,r,n);return await (0,i.gS)((0,i.rJ)(a.db,"learning_items"),c),await p(),!0}catch(e){return console.error("Error adding learning item:",e),!1}}async function m(r,n){if(!e)return!1;try{let e=t.find(e=>e.id===r);if(!e)return!1;let o=new Date().toISOString().split("T")[0],l=(0,s.Cz)(e,n,o);return await (0,i.mZ)((0,i.H9)(a.db,"learning_items",r),{lastReviewDate:o,nextReviewDate:l.nextReviewDate,interval:l.interval,easeFactor:l.easeFactor,repetitions:l.repetitions,status:l.status}),await p(),!0}catch(e){return console.error("Error reviewing item:",e),!1}}async function h(t,n){if(!e)return!1;try{return await (0,i.mZ)((0,i.H9)(a.db,"learning_items",t),{notes:n}),r(e=>e.map(e=>e.id===t?{...e,notes:n}:e)),!0}catch(e){return console.error("Error updating notes:",e),!1}}async function g(t){if(!e)return!1;try{return await (0,i.mZ)((0,i.H9)(a.db,"learning_items",t),{status:"suspended"}),await p(),!0}catch(e){return console.error("Error suspending item:",e),!1}}async function f(r){if(!e)return!1;try{let e=t.find(e=>e.id===r);if(!e)return!1;let n=0===e.repetitions?"new":e.repetitions<2?"learning":"review";return await (0,i.mZ)((0,i.H9)(a.db,"learning_items",r),{status:n}),await p(),!0}catch(e){return console.error("Error unsuspending item:",e),!1}}async function y(t){if(!e||!confirm("Are you sure you want to delete this learning item?"))return!1;try{return await (0,i.kd)((0,i.H9)(a.db,"learning_items",t)),r(e=>e.filter(e=>e.id!==t)),u(e=>e.filter(e=>e.id!==t)),!0}catch(e){return console.error("Error deleting item:",e),!1}}async function p(){if(e)try{let t=(0,i.P)((0,i.rJ)(a.db,"learning_items"),(0,i._M)("userId","==",e),(0,i.My)("nextReviewDate","asc")),n=(await (0,i.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));r(n);let o=new Date().toISOString().split("T")[0],l=(0,s.LN)(n,o);u(l)}catch(e){console.error("Error refreshing items:",e)}}return(0,n.useEffect)(()=>{if(!e){r([]),u([]),l(!1);return}!async function(){try{l(!0),console.log("\uD83D\uDCD6 Fetching learning items for userId:",e);let t=(0,i.P)((0,i.rJ)(a.db,"learning_items"),(0,i._M)("userId","==",e),(0,i.My)("nextReviewDate","asc")),n=await (0,i.GG)(t);console.log("\uD83D\uDCCA Found",n.docs.length,"learning items");let o=n.docs.map(e=>({id:e.id,...e.data()}));r(o);let c=new Date().toISOString().split("T")[0],d=(0,s.LN)(o,c);console.log("\uD83D\uDD14",d.length,"items due today"),u(d)}catch(e){console.error("❌ Error fetching learning items:",e),e instanceof Error&&(console.error("Error details:",e.message),e.message.includes("index")&&console.error("⚠️ FIRESTORE INDEX REQUIRED! Check the error message for the index creation link."))}finally{l(!1)}}()},[e]),{allItems:t,dueItems:c,loading:o,addLearningItem:d,reviewItem:m,updateNotes:h,suspendItem:g,unsuspendItem:f,deleteItem:y,refreshItems:p,getItemsDueOn:function(e){return(0,s.LN)(t,e)},getStats:function(){let e=new Date().toISOString().split("T")[0];return(0,s.s2)(t,e)}}}}}]);